<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sign up</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hahmlet:wght@300&family=Koulen&display=swap');
        </style>

    <style>
    body {
      background-color: #e0e0e0;
      font-family: "Hahmlet", serif;
    }
    h1 {
        text-align: center;
        box-sizing: border-box;
        font-size: 55px;
        color: #842029;
        font-weight: 900;
        font-family: "Koulen", cursive;
        letter-spacing: 3px;
    }
    h3 {
      font-family: "Hahmlet", serif;
      font-size: 30px;
      font-weight: 900;
      letter-spacing: 3px;
    }
    input {
      font-size: 18px;
      border: 0;
      cursor: 0;
    }
    button {
      font-size: 22px;
      background-color: #5e5e5e;
      color: aliceblue;
      border: 0;
      cursor: 0;
      
    }
    a {
      color: #842029;
    }
    </style>
  </head>
  


  <body>
    <div class="m-4 bg-success"></div>
    <h1 style="margin-top: 90px; margin-bottom: 60px;">HOMEMOVE</h1>

    <div class="m-4 bg-success"></div>


          <div class="container" style="text-align: center";>
            <input type="text" id="username" class="rounded-pill" name="username" placeholder="닉네임을 입력하세요"
            style="
            border: 0 solid black;
            padding-top: 5px;
            padding-bottom: 5px;
            padding-left: 10px;
            "  />
             <br>
             <div class="m-4 bg-success"></div>
      
            <input type="text" id="email" class="rounded-pill" name="email" placeholder="이메일을 입력하세요"  
            style="
            border: 0 solid black;
            padding-top: 5px;
            padding-bottom: 5px;
            padding-left: 10px;
            " />
             <br>
             <div class="m-4 bg-success"></div>
           
     
            <input type="password" id="password" class="rounded-pill" name="password" placeholder="비밀번호를 입력하세요" 
            style="
            border: 0 solid black;
            padding-top: 5px;
            padding-bottom: 5px;
            padding-left: 10px;
            " /> 
             <br>
             <div class="m-4 bg-success"></div>
          
              <input type="text" id="now" class="rounded-pill" name="now" placeholder="현재 체중을 입력하세요"  
              style="
              border: 0 solid black;
              padding-top: 5px;
              padding-bottom: 5px;
              padding-left: 10px;
              " />
               <br>
               <div class="m-4 bg-success"></div>
           
      
              <input type="text" id="goal" class="rounded-pill" name="goal" placeholder="목표 체중을 입력하세요"  
              style="
              border: 0 solid black;
              padding-top: 5px;
              padding-bottom: 5px;
              padding-left: 10px;
              " />
               <br>
               <div class="m-4 bg-success"></div>
       
            <label>성별</label> 
            <select id="Genbox">
              <option value="Male">남</option>
              <option value="Female">여</option>
            </select>
            <br>
            <div class="m-4 bg-success"></div>

            <button  id="insbtn" class="rounded-pill" 
            style="
            margin-left: 0px;
            margin-top: 20px;
            padding-left: 90px;
            padding-right: 90px;
            padding-top: 5px;
            padding-bottom: 5px;
            margin-right: 0px;
            ">회원가입</button>

            <div class="m-4 bg-success"></div>
            <br>
            <a href="login.html">이미 회원이신가요?</a>

          </div>
      
</body>

</html>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-app.js";
  import { getFirestore, setDoc, addDoc, doc, collection } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-firestore.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-auth.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyDTVr0a8LU3blZeAuckU4hViAIu622salU",
    authDomain: "capdi-6626e.firebaseapp.com",
    databaseURL: "https://capdi-6626e-default-rtdb.firebaseio.com",
    projectId: "capdi-6626e",
    storageBucket: "capdi-6626e.appspot.com",
    messagingSenderId: "597227556809",
    appId: "1:597227556809:web:6fa7cb02cc8bf1b2e6e218"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore();
  const auth = getAuth();


  let username = document.getElementById("username");
  let email = document.getElementById("email");
  let pw = document.getElementById("password");
  let now = document.getElementById("now");
  let goal = document.getElementById("goal");
  let genbox = document.getElementById("Genbox");

  let insBtn  = document.getElementById("insbtn");




  insBtn.addEventListener('click',(e) => {

    var email = document.getElementById('email').value;
    var password = document.getElementById('password').value;
   
    createUserWithEmailAndPassword(auth, email, password)
    .then((userCredential) => {
        // Signed in
        const user = userCredential.user
        
        alert('회원가입 성공!');
        
        window.location.href = "timer.html";

        // ...
    })
    .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;

        alert(errorMessage);
        // ..
    });
  })

  async function AddDocument_CustomID() {
    var ref = doc(db, "users", pw.value);

    const docRef = await setDoc(ref, {
      username: username.value,
      email: email.value,
      pw: pw.value,
      now: now.value,
      goal: goal.value,
      genbox: genbox.value,
    })
  
  }

  insBtn.addEventListener("click", AddDocument_CustomID);


</script>
